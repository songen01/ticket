(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[295],{608:function(e,t,n){Promise.resolve().then(n.bind(n,6998))},6998:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Z}});var r=n(3518),i=n(7024),a=n(6381),s=n(4098),c=n(9160),u=n(9197);let l=()=>({remoteProgram:"program aleo_ticket.aleo;\n\nrecord Ticket:\n    owner as address.private;\n    gates as u64.private;\n    name as field.private;\n    ticket_num as u64.private;\n    ticket_price as u64.private;\n    start_time as u64.private;\n    end_time as u64.private;\n    ticket_url1 as field.private;\n    ticket_url2 as field.private;\n    ticket_url3 as field.private;\n    ticket_url4 as field.private;\n\nmapping ticket_num:\n    key left as field.public;\n    value right as u64.public;\n\nmapping ticket_price:\n    key left as field.public;\n    value right as u64.public;\n\nmapping start_time:\n    key left as field.public;\n    value right as u64.public;\n\nmapping end_time:\n    key left as field.public;\n    value right as u64.public;\n\nmapping ticket_url:\n    key left as field.public;\n    value right as field.public;\n\nfunction create_ticket:\n    input r0 as field.public;\n    input r1 as u64.public;\n    input r2 as u64.public;\n    input r3 as u64.public;\n    input r4 as u64.public;\n    input r5 as field.public;\n    gt r1 0u64 into r6;\n    assert.eq r6 true ;\n   finalize r0 r1 r2 r3 r4 r5;\n\nfinalize create_ticket:\n    input r0 as field.public;\n    input r1 as u64.public;\n    input r2 as u64.public;\n    input r3 as u64.public;\n    input r4 as u64.public;\n    input r5 as field.public;\n    set r1 into ticket_num[r0];\n    set r2 into ticket_price[r0];\n    set r3 into start_time[r0];\n    set r4 into end_time[r0];\n    set r5 into ticket_url[r0];\n\nfunction mint_public:\n    input r0 as address.public;\n    input r1 as field.public;\n    input r2 as u64.public;\n    input r3 as u64.public;\n    input r4 as u64.public;\n    input r5 as u64.public;\n    input r6 as field.public;\n    input r7 as field.public;\n    input r8 as field.public;\n    input r9 as field.public;\n    input r10 as u64.private;\n    lt r4 r10 into r11;\n    assert.eq r11 true ;\n    lt r10 r5 into r12;\n    assert.eq r12 true ;\n    cast r0 0u64 r1 r2 r3 r4 r5 r6 r7 r8 r9 into r13 as Ticket.record;\n    output r13 as Ticket.record;\n   finalize r1;\n\nfinalize mint_public:\n    input r0 as field.public;\n    get ticket_num[r0] into r1;\n    sub r1 1u64 into r2;\n    set r2 into ticket_num[r0];\n\nfunction mint_private:\n    input r0 as address.private;\n    input r1 as field.private;\n    input r2 as u64.private;\n    input r3 as u64.private;\n    input r4 as u64.private;\n    input r5 as u64.private;\n    input r6 as field.public;\n    input r7 as field.public;\n    input r8 as field.public;\n    input r9 as field.public;\n    input r10 as u64.private;\n    lt r4 r10 into r11;\n    assert.eq r11 true ;\n    lt r10 r5 into r12;\n    assert.eq r12 true ;\n    cast r0 0u64 r1 r2 r3 r4 r5 r6 r7 r8 r9 into r13 as Ticket.record;\n    output r13 as Ticket.record;\n   finalize r1;\n\nfinalize mint_private:\n    input r0 as field.public;\n    get ticket_num[r0] into r1;\n    sub r1 1u64 into r2;\n    set r2 into ticket_num[r0];\n\nfunction transfer_public:\n    input r0 as Ticket.record;\n    input r1 as address.public;\n    assert.eq self.caller r0.owner ;\n    cast r1 r0.gates r0.name r0.ticket_num r0.ticket_price r0.start_time r0.end_time r0.ticket_url1 r0.ticket_url2 r0.ticket_url3 r0.ticket_url4 into r2 as Ticket.record;\n    output r2 as Ticket.record;\n\nfunction transfer_private:\n    input r0 as Ticket.record;\n    input r1 as address.private;\n    assert.eq self.caller r0.owner ;\n    cast r1 r0.gates r0.name r0.ticket_num r0.ticket_price r0.start_time r0.end_time r0.ticket_url1 r0.ticket_url2 r0.ticket_url3 r0.ticket_url4 into r2 as Ticket.record;\n    output r2 as Ticket.record;\n\nfunction transfer_private_to_public:\n    input r0 as Ticket.record;\n    input r1 as address.public;\n    assert.eq self.caller r0.owner ;\n    cast r1 r0.gates r0.name r0.ticket_num r0.ticket_price r0.start_time r0.end_time r0.ticket_url1 r0.ticket_url2 r0.ticket_url3 r0.ticket_url4 into r2 as Ticket.record;\n    output r2 as Ticket.record;\n\nfunction transfer_public_to_private:\n    input r0 as Ticket.record;\n    input r1 as address.private;\n    assert.eq self.caller r0.owner ;\n    cast r1 r0.gates r0.name r0.ticket_num r0.ticket_price r0.start_time r0.end_time r0.ticket_url1 r0.ticket_url2 r0.ticket_url3 r0.ticket_url4 into r2 as Ticket.record;\n    output r2 as Ticket.record;\n",aleoFunction:"create_public_identifier",inputs:["","777field","777field","777field","777field","777field"],privateKey:"",fee:.1,feeRecord:"",url:"https://chain.daosso.xyz"});var o=n(7520),p=n(5083),d=n(1388),f=n(1321),m=n(2405);let g=new m.j3({token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkaWQ6ZXRocjoweDY2ZkZlNTQ1Q2ZGRkE1YTAwQUZlNENDOEU1YTg3MmE3MDg5ODk1NDkiLCJpc3MiOiJuZnQtc3RvcmFnZSIsImlhdCI6MTYzNjUxNTcyMTI3MCwibmFtZSI6ImZsb3ctcHJvamVjdCJ9.DJkAsyklhZDz0ZctOwKcl7zeJjt_z7TZTjRp-B_xu_Q"}),k=async e=>{console.info("Storing Metadata to IPFS...");let t=await g.store(e);return console.info("Success! Metadata IPFS URL:",t.url),t.url},b=(e,t,n)=>({name:"MomentSwap Hyperspace NFTs 2023",description:t,image:new Blob,properties:{authors:[{addres:e}],content:{"text/markdown":t},media:{cid:null==n?void 0:n.cid,type:null==n?void 0:n.type}}});var h=n(2475),_=n(3683),v=n(4520),w=n(2080),x=n(1491),T=n(17),y=n(265),j=n(4733),C=n(3033),N=n(6977);function Z(e){let{params:{id:t=1}}=e;(0,N.useRouter)();let n=(0,u.useRef)(),m=(0,f.GT)(e=>e.PK),g=(0,f.GT)(e=>e.Address),[Z,A]=u.useState(!1),[E,I]=u.useState(!1),[S,R]=u.useState(!1);(0,u.useEffect)(()=>{window.scrollTo(0,0)},[]);let M=["https://marketplace.canva.com/EAFA7iX_soE/1/0/1600w/canva-dark-blue-modern-night-music-festival-ticket-jis9rnXxMbs.jpg","https://marketplace.canva.com/EAFftn-UJko/1/0/1600w/canva-black-and-white-purple-neon-night-music-live-concert-ticket-kIP8QR-muEQ.jpg","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSwot9byi1gXcLY1alMxfBXTKCqAQvJfB1f_5sQwQxrHqO_ro1yYTrZCnY6P3MOvl6X0XQ&usqp=CAU","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRpkGq4VUQLrsD6t5pUOisi6-kAebhuy4ovD8_KOuidDGwr_jmmF8cCUI48_l8GXO0hFZ0&usqp=CAU","https://marketplace.canva.com/EAE9Q0hiuEc/1/0/1600w/canva-blue-white-minimalist-the-night-concert-ticket-H4JMsRp6iCc.jpg","https://marketplace.canva.com/EAFZNNFft7g/1/0/1600w/canva-white-and-black-modern-music-concert-modern-ticket-gCaohCfEAt0.jpg","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTxefP6s7X5YRiDCqZH1Zaom6BQ4MQEHMZhLhq9qVFVjrMuSRHNmVJwKJSbro3eoiGzYXE&usqp=CAU","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSKbj8TNwwe5cFa18OjIi8rwTPU17VFSzmcZ10rqy0UFnyLJ7PvA673VT9KbevbckWbbg&usqp=CAU"],U=()=>{A(!1)},q=()=>{A(!0),setTimeout(()=>{I(!0),setTimeout(()=>{A(!1)},2e3)},6e4)},O={name:"Music Festival",description:"Here's a brief introduction to the NIGHT MUSIC LIVECONCERT music festival:\n\nNIGHT MUSIC LIVECONCERT is a dynamic and passionate music extravaganza that brings together an array of musical performances, including live bands and DJs, from various genres. The festival's theme is nightlife and music, allowing audiences to revel in the excitement and energy of the night through music and dance."},z=async()=>{var e,r;q(),R(!1),n.current=(0,o.a)();let i=null===(e=JSON.parse(window.localStorage.getItem("aleoRecords")))||void 0===e?void 0:e.filter(e=>e.result.indexOf("microcredits")>-1).sort((e,t)=>t.height-e.height),a=i[i.length-1],s=b(g,O.name,M[t]),c=await k(s);n.current.addEventListener("message",e=>{"EXECUTION_TRANSACTION_COMPLETED"==e.data.type?p.Z.post("https://chain.daosso.xyz/testnet3/transaction/broadcast",e.data.executeTransaction,{headers:{"Content-Type":"application/json"}}).then(e=>{console.log(e.data),U();var t=indexedDB.open("aleoDB",1);t.onsuccess=function(e){var t=e.target.result,n=t.transaction(["AleoStore"],"readwrite"),r=n.objectStore("AleoStore").delete(a.id);r.onsuccess=function(e){console.log("success")},r.onerror=function(e){console.log("fail")},n.oncomplete=function(){t.close()}},t.onerror=function(e){console.log("open db error")}},()=>{U()}):"ERROR"==e.data.type&&(U(),alert(e.data.errorMessage),console.log(e.data.errorMessage))});let{remoteProgram:u,url:f}=l();null===(r=n.current)||void 0===r||r.postMessage({type:"ALEO_EXECUTE_PROGRAM_ON_CHAIN",remoteProgram:u,aleoFunction:"mint_public",inputs:[g,(0,d.s3)((0,d.Qs)("hello"))+"field","2u64","2u64","2u64",(new Date().getTime()+100).toString()+"u64",...(0,d.Kj)((0,d.s3)((0,d.Qs)(c.toString())),"field",4),new Date().getTime().toString()+"u64"],privateKey:m,fee:2,feeRecord:a.result,url:f})};return(0,r.jsx)("div",{className:"flex min-h-screen flex-col items-center justify-between p-4",children:(0,r.jsxs)("div",{className:"max-h-screen flex s",children:[(0,r.jsx)(h.Z,{open:E,autoHideDuration:6e3,onClose:U,children:(0,r.jsx)(_.Z,{onClose:U,severity:"success",sx:{width:"100%"},children:"This is a success message!"})}),(0,r.jsx)(i.Z,{sx:{width:"900px"},component:"img",alt:"green iguana",height:"50",image:M[t]}),(0,r.jsxs)(a.Z,{className:"flex flex-col justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(s.Z,{gutterBottom:!0,variant:"h5",component:"div",children:O.name}),(0,r.jsx)(s.Z,{className:"whitespace-pre-wrap w-[500px]",variant:"body2",color:"text.secondary",children:O.description})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)(s.Z,{className:"mb-2 font-bold",variant:"body2",color:"text.secondary",children:[(0,r.jsx)("br",{}),(0,r.jsx)("span",{className:"font-bold",children:"Price"})," $15"]}),(0,r.jsx)(c.Z,{variant:"outlined",onClick:()=>R(!0),children:"BUY"})]})]}),(0,r.jsx)(v.Z,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:Z,onClick:function(){},children:(0,r.jsx)(w.Z,{color:"inherit"})}),(0,r.jsxs)(x.Z,{open:S,onClose:U,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,r.jsx)(T.Z,{id:"alert-dialog-title",children:"Signature Message"}),(0,r.jsx)(y.Z,{children:(0,r.jsx)(j.Z,{id:"alert-dialog-description",children:"Are you sure to sign the message"})}),(0,r.jsxs)(C.Z,{children:[(0,r.jsx)(c.Z,{onClick:U,children:"Cancel"}),(0,r.jsx)(c.Z,{onClick:z,autoFocus:!0,children:"Agree"})]})]})]})})}},1388:function(e,t,n){"use strict";n.d(t,{Kj:function(){return p},Qs:function(){return u},aN:function(){return o},s3:function(){return l}});var r=n(8245),i=n.n(r),a=n(7860),s=n.n(a),c=n(8213).Buffer;function u(e){let t=c.from(e,"utf8");return i().encode(t)}function l(e){let t=i().decode(e),n=c.from(t).toString("hex"),r=s()(n,16);return r.toString()}let o=e=>null==e?void 0:e.map(e=>(function(e){let t=i().decode(e),n="";for(let e=0;e<t.length;e++)n+=String.fromCharCode(t[e]);return n})(function(e){let t=BigInt(null!=e?e:""),n="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",r=BigInt(n.length),i="";for(;t>0n;){let e=t%r,a=t/r;t=a,i=n[Number(e)]+i}return i}(e)));function p(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,r=Math.ceil(e.length/n),i=[];for(let n=0;n<e.length;n+=r){let a="1"+e.slice(n,n+r)+t;i.push(a)}return i}},7520:function(e,t,n){"use strict";n.d(t,{a:function(){return i},y:function(){return r}});let r=()=>new Worker(n.tu(new URL(n.p+n.u(34),n.b))),i=()=>new Worker(n.tu(new URL(n.p+n.u(701),n.b)))},1321:function(e,t,n){"use strict";n.d(t,{GT:function(){return i}});var r=n(5760);let i=(0,r.Ue)(e=>({PK:"",Address:"",ViewKey:"",login:!1,setAleoPrivateKey:t=>e(e=>({PK:t})),setAleoAddress:t=>e(e=>({Address:t})),setAleoViewKey:t=>e(e=>({ViewKey:t})),setLogin:t=>e(e=>({login:!0}))}));(0,r.Ue)(e=>({loading:!1,setLoading:t=>e(e=>({loading:t}))})),(0,r.Ue)(e=>({records:[],setRecords:t=>e(e=>({records:t}))}))}},function(e){e.O(0,[317,429,160,213,857,439,883,313,447,744],function(){return e(e.s=608)}),_N_E=e.O()}]);